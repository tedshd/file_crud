window.ajax=function(e){var r,t,n,s,o,a;if(!e)return console.error("not set arguments");if(!(r=e).method)return console.error("not set method");if(t=r.method,!r.url)return console.error("not set url");if(n=r.url,!r.success)return console.error("not set success callback");function u(e){if(!e)return"";var r="";for(var t in e)r=r+t+"="+encodeURIComponent(e[t])+"&";return r=r.substr(0,r.length-1)}if(a=r.success,s=r.data||null,"GET"===r.method&&s&&!function(e){for(var r in e)if(e.hasOwnProperty(r))return!1;return!0}(s)&&(n=n+"?"+u(s)),"undefined"!=typeof XDomainRequest){var i=location.host,c=n.replace("https://","").replace("http://","");if(c=c.slice(0,c.indexOf("/")),0===n.indexOf("//")||c!==i){var f=new XDomainRequest;return f.open(t,n),f.onprogress=function(){},f.ontimeout=function(){},f.onerror=function(){},f.onload=function(){a(JSON.parse(f.responseText))},void setTimeout(function(){f.send()},0)}}if((o=new XMLHttpRequest).open(t,n),r.setRequestHeader)for(var d in r.setRequestHeader)o.setRequestHeader(d,r.setRequestHeader[d]);r.withCredentials&&(o.withCredentials=!0),"GET"!==r.method&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(u(s)),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e;switch(r.response){case"json":e=JSON.parse(o.responseText);break;case"xml":e=o.responseXML;break;default:e=JSON.parse(o.responseText)}a(e)}else{if(!r.error)return console.error("xhr.status",o.status);r.error(o.status,o.responseText)}}};